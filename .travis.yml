language: objective-c
osx_image: xcode11.3
before_install:
- brew install gnu-sed
- export PATH="/usr/local/opt/gnu-sed/libexec/gnubin:$PATH"
- export LC_ALL=en_US.UTF-8
- git config --global user.email "maxime.colmant@gmail.com"
- git config --global user.name "Maxime Colmant"
- gem install cocoapods xcpretty --no-document --quiet
script:
- ./ci/build-cocoapods.sh
- |
  if ! [ -z "$TRAVIS_TAG" ]; then
    ./ci/publish-cocoapods.sh --tag="${TRAVIS_TAG}" &&
    git add IndoorLocation.podspec &&
    { git diff-index --quiet HEAD IndoorLocation.podspec || git commit -m ":robot: chore: updating the Podspec's version to ${TRAVIS_TAG} :robot:"; } &&
    git switch -c master &&
    git push -q https://${GITHUB_TOKEN}@github.com/IndoorLocation/indoor-location-ios.git master
  fi;
env:
  global:
  - secure: "WbK0UJBZRZVVF+i2VQiAlIZGhcGaBrz0EXuc3XSDkxb4nr3nfbvqHOiYjLVOUwlrOB8iT0Ve+j4m7r3xsstPxWCUtc+DsUH80IV7L0rZTPr0ofh4dYwnK64V8O4eVZZVYXDhjnrJGHcm8MmwOjR1UZYQCZb4hBZ6r4G4TXHz9r4T/wJDiNF8zLx6R11sPxXv2aXfF47SiF8vPw/iyqQJJcquR6PExxaG6kAo9AZSbh03jSVskXiTMk+JogKJYdfEIFtFz++EVe0nM6M/Rhp48J0QtsiFwobkf8HMTehrVMd8kuVLb0C+Y41ncQKDPnx/tZBhX2cKUUVksIpPQpBtieouOcZO75xegEh01f7937pw6DTQpc8i252bRPVmEDziRWrLz7UUp2niZ/eyJPhCcUZ6id/IdZfXQM/Y2aarLYqu4KVCl6aQy+fU5fq53hxCWDJanbgnuN4zmAaTJOpQLpANeYunPpCBTqRftxj7BzVN/sta+RRVguZZLBjHBg6zlUZFFS9FH4PNTbsN/0+hETfYw1hbB1NPD2mhJnUCDkRijirBGoFeEoA8zYdDRdgqgQC47OecdGcZLX67HZAKfhYBnXv1vGutH1AEdWE2YPvYCTOcDgvxNjdJT74Ou07SjSkIBath5/Gvb1YBOrpo26nhOVEiniGaG8paCJZrA0I=" # GITHUB_TOKEN
  - secure: "zODPjq5po9//LsZHyzR/saxgMsGj7SQri3jNs2hCJSf0IDTCKS1uK9pzlcfWnGYNgFhzK9UjxnrH3vA6DzRqipXjCnQK+XL0VFAedT5TN8Ewl0TQ6DwH21Br623quscO2D9LfolGfhaV4bXzpor6uRrg/8CYwtuo0B4IFcLqEyetUoJ/RD6kDNJGZ0lNurfGW00DIQE2jav0UCgdjHCcLNN4fekCkoq2QPCaLp6OP2LALWbGJdmI8n7olFRM0atNgtF0pIR4TQmZA+3PEfONE7vE4YKtSSIAE3t6w7YgkMMLzH41l+hsaOnWs8mfC94DhZVliGnt8xInsRTZBTw27CCfuYtq+GLxr4TBEr9jCVBrMF7zs+iZKm3y7hANqavXe/QspRVls6zzpevac/6WcBJ6Rr2O6A1rK/MI1wzD6jQQbdyScNWbhZX5Pqh4j+LYsliB2KdBF19tHdibpKkVUW7D+1ZWM+RKdCPIWtwL1TjPe2nSav6qCiYkkSYS/uGBtXlFtoRdYjEZn9hj/w71rnxqHaQeA2cnI6nZp1CX7fG2HPwAlTu7wH/GO525Z1QjDr2IAQxOQkgQGtKc3WxNVLInrZysmF7Q0l8p9j58TdEFK7vTq1GoZHti6OHitR05yXnG8KyHB8+iBW6QKS8q+vwDtlKBhB+oA9+1ubZtgHU=" # COCOAPODS_TRUNK_TOKEN
